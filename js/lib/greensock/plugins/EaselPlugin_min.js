var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";var _ColorFilter,_ColorMatrixFilter,_numExp=/(\d|\.)+/g,_colorProps=["redMultiplier","greenMultiplier","blueMultiplier","alphaMultiplier","redOffset","greenOffset","blueOffset","alphaOffset"],_colorLookup={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},_parseColor=function(color){return""===color||null==color||"none"===color?_colorLookup.transparent:_colorLookup[color]?_colorLookup[color]:"number"==typeof color?[color>>16,color>>8&255,255&color]:"#"===color.charAt(0)?(4===color.length&&(color="#"+color.charAt(1)+color.charAt(1)+color.charAt(2)+color.charAt(2)+color.charAt(3)+color.charAt(3)),color=parseInt(color.substr(1),16),[color>>16,color>>8&255,255&color]):color.match(_numExp)||_colorLookup.transparent},_parseColorFilter=function(t,v,pg){if(!_ColorFilter&&(_ColorFilter=_gsScope.ColorFilter||_gsScope.createjs.ColorFilter,!_ColorFilter))throw"EaselPlugin error: The EaselJS ColorFilter JavaScript file wasn't loaded.";for(var c,s,e,a,p,filters=t.filters||[],i=filters.length;--i>-1;)if(filters[i]instanceof _ColorFilter){s=filters[i];break}if(s||(s=new _ColorFilter,filters.push(s),t.filters=filters),e=s.clone(),null!=v.tint)c=_parseColor(v.tint),a=null!=v.tintAmount?Number(v.tintAmount):1,e.redOffset=Number(c[0])*a,e.greenOffset=Number(c[1])*a,e.blueOffset=Number(c[2])*a,e.redMultiplier=e.greenMultiplier=e.blueMultiplier=1-a;else for(p in v)"exposure"!==p&&"brightness"!==p&&(e[p]=Number(v[p]));for(null!=v.exposure?(e.redOffset=e.greenOffset=e.blueOffset=255*(Number(v.exposure)-1),e.redMultiplier=e.greenMultiplier=e.blueMultiplier=1):null!=v.brightness&&(a=Number(v.brightness)-1,e.redOffset=e.greenOffset=e.blueOffset=a>0?255*a:0,e.redMultiplier=e.greenMultiplier=e.blueMultiplier=1-Math.abs(a)),i=8;--i>-1;)p=_colorProps[i],s[p]!==e[p]&&pg._addTween(s,p,s[p],e[p],"easel_colorFilter");if(pg._overwriteProps.push("easel_colorFilter"),!t.cacheID)throw"EaselPlugin warning: for filters to display in EaselJS, you must call the object's cache() method first. "+t},_idMatrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],_lumR=.212671,_lumG=.71516,_lumB=.072169,_applyMatrix=function(m,m2){if(!(m instanceof Array&&m2 instanceof Array))return m2;var y,x,temp=[],i=0,z=0;for(y=0;4>y;y++){for(x=0;5>x;x++)z=4===x?m[i+4]:0,temp[i+x]=m[i]*m2[x]+m[i+1]*m2[x+5]+m[i+2]*m2[x+10]+m[i+3]*m2[x+15]+z;i+=5}return temp},_setSaturation=function(m,n){if(isNaN(n))return m;var inv=1-n,r=inv*_lumR,g=inv*_lumG,b=inv*_lumB;return _applyMatrix([r+n,g,b,0,0,r,g+n,b,0,0,r,g,b+n,0,0,0,0,0,1,0],m)},_colorize=function(m,color,amount){isNaN(amount)&&(amount=1);var c=_parseColor(color),r=c[0]/255,g=c[1]/255,b=c[2]/255,inv=1-amount;return _applyMatrix([inv+amount*r*_lumR,amount*r*_lumG,amount*r*_lumB,0,0,amount*g*_lumR,inv+amount*g*_lumG,amount*g*_lumB,0,0,amount*b*_lumR,amount*b*_lumG,inv+amount*b*_lumB,0,0,0,0,0,1,0],m)},_setHue=function(m,n){if(isNaN(n))return m;n*=Math.PI/180;var c=Math.cos(n),s=Math.sin(n);return _applyMatrix([_lumR+c*(1-_lumR)+s*-_lumR,_lumG+c*-_lumG+s*-_lumG,_lumB+c*-_lumB+s*(1-_lumB),0,0,_lumR+c*-_lumR+.143*s,_lumG+c*(1-_lumG)+.14*s,_lumB+c*-_lumB+s*-.283,0,0,_lumR+c*-_lumR+s*-(1-_lumR),_lumG+c*-_lumG+s*_lumG,_lumB+c*(1-_lumB)+s*_lumB,0,0,0,0,0,1,0,0,0,0,0,1],m)},_setContrast=function(m,n){return isNaN(n)?m:(n+=.01,_applyMatrix([n,0,0,0,128*(1-n),0,n,0,0,128*(1-n),0,0,n,0,128*(1-n),0,0,0,1,0],m))},_parseColorMatrixFilter=function(t,v,pg){if(!_ColorMatrixFilter&&(_ColorMatrixFilter=_gsScope.ColorMatrixFilter||_gsScope.createjs.ColorMatrixFilter,!_ColorMatrixFilter))throw"EaselPlugin error: The EaselJS ColorMatrixFilter JavaScript file wasn't loaded.";for(var matrix,startMatrix,s,filters=t.filters||[],i=filters.length;--i>-1;)if(filters[i]instanceof _ColorMatrixFilter){s=filters[i];break}for(s||(s=new _ColorMatrixFilter(_idMatrix.slice()),filters.push(s),t.filters=filters),startMatrix=s.matrix,matrix=_idMatrix.slice(),null!=v.colorize&&(matrix=_colorize(matrix,v.colorize,Number(v.colorizeAmount))),null!=v.contrast&&(matrix=_setContrast(matrix,Number(v.contrast))),null!=v.hue&&(matrix=_setHue(matrix,Number(v.hue))),null!=v.saturation&&(matrix=_setSaturation(matrix,Number(v.saturation))),i=matrix.length;--i>-1;)matrix[i]!==startMatrix[i]&&pg._addTween(startMatrix,i,startMatrix[i],matrix[i],"easel_colorMatrixFilter");if(pg._overwriteProps.push("easel_colorMatrixFilter"),!t.cacheID)throw"EaselPlugin warning: for filters to display in EaselJS, you must call the object's cache() method first. "+t;pg._matrix=startMatrix};_gsScope._gsDefine.plugin({propName:"easel",priority:-1,version:"0.2.0",API:2,init:function(target,value,tween,index){this._target=target;var p,pt,tint,colorMatrix,end;for(p in value)end=value[p],"function"==typeof end&&(end=end(index,target)),"colorFilter"===p||"tint"===p||"tintAmount"===p||"exposure"===p||"brightness"===p?tint||(_parseColorFilter(target,value.colorFilter||value,this),tint=!0):"saturation"===p||"contrast"===p||"hue"===p||"colorize"===p||"colorizeAmount"===p?colorMatrix||(_parseColorMatrixFilter(target,value.colorMatrixFilter||value,this),colorMatrix=!0):"frame"===p?(this._firstPT=pt={_next:this._firstPT,t:target,p:"gotoAndStop",s:target.currentFrame,f:!0,n:"frame",pr:0,type:0,m:Math.round},pt.c="number"==typeof end?end-pt.s:"string"==typeof end?parseFloat(end.split("=").join("")):0,pt._next&&(pt._next._prev=pt)):null!=target[p]&&(this._firstPT=pt={_next:this._firstPT,t:target,p:p,f:"function"==typeof target[p],n:p,pr:0,type:0},pt.s=pt.f?target[p.indexOf("set")||"function"!=typeof target["get"+p.substr(3)]?p:"get"+p.substr(3)]():parseFloat(target[p]),pt.c="number"==typeof end?end-pt.s:"string"==typeof end?parseFloat(end.split("=").join("")):0,pt._next&&(pt._next._prev=pt));return!0},set:function(v){for(var val,pt=this._firstPT,min=1e-6;pt;)val=pt.c*v+pt.s,pt.m?val=pt.m(val,pt.t):min>val&&val>-min&&(val=0),pt.f?pt.t[pt.p](val):pt.t[pt.p]=val,pt=pt._next;this._target.cacheID&&this._target.updateCache()}})}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()();