var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";var _NaNExp=/[^\d\-\.]/g,_DEG2RAD=Math.PI/180,_numExp=/(\d|\.)+/g,_colorLookup={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},_parseColor=function(color){return"number"==typeof color?[color>>16,color>>8&255,255&color]:""===color||null==color||"none"===color||"string"!=typeof color?_colorLookup.transparent:_colorLookup[color]?_colorLookup[color]:"#"===color.charAt(0)?(4===color.length&&(color="#"+color.charAt(1)+color.charAt(1)+color.charAt(2)+color.charAt(2)+color.charAt(3)+color.charAt(3)),color=parseInt(color.substr(1),16),[color>>16,color>>8&255,255&color]):color.match(_numExp)||_colorLookup.transparent},_transformMap={scaleX:1,scaleY:1,tx:1,ty:1,rotation:1,shortRotation:1,skewX:1,skewY:1,scale:1},_getTransform=function(t,rec){var s=t.matrix,min=1e-6,a=s.a,b=s.b,c=s.c,d=s.d,m=rec?t._gsTransform||{skewY:0}:{skewY:0},invX=m.scaleX<0;return m.tx=s.e-(m.ox||0),m.ty=s.f-(m.oy||0),m.scaleX=Math.sqrt(a*a+b*b),m.scaleY=Math.sqrt(d*d+c*c),m.rotation=a||b?Math.atan2(b,a):m.rotation||0,m.skewX=c||d?Math.atan2(c,d)+m.rotation:m.skewX||0,Math.abs(m.skewX)>Math.PI/2&&(invX?(m.scaleX*=-1,m.skewX+=m.rotation<=0?Math.PI:-Math.PI,m.rotation+=m.rotation<=0?Math.PI:-Math.PI):(m.scaleY*=-1,m.skewX+=m.skewX<=0?Math.PI:-Math.PI)),m.rotation<min&&m.rotation>-min&&(a||b)&&(m.rotation=0),m.skewX<min&&m.skewX>-min&&(b||c)&&(m.skewX=0),rec&&(t._gsTransform=m),m},_parseVal=function(v,d){return null==v?d:"string"==typeof v&&1===v.indexOf("=")?parseInt(v.charAt(0)+"1",10)*Number(v.substr(2))+d:Number(v)},_parseAngle=function(v,d){var m=-1===v.indexOf("rad")?_DEG2RAD:1,r=1===v.indexOf("=");return v=Number(v.replace(_NaNExp,""))*m,r?v+d:v},RaphaelPlugin=_gsScope._gsDefine.plugin({propName:"raphael",version:"0.2.2",API:2,init:function(target,value,tween){if(!target.attr)return!1;this._target=target,this._tween=tween,this._props=target._gsProps=target._gsProps||{};var p,s,v,pt,clr1,clr2,rel;for(p in value)v=value[p],"transform"!==p?_transformMap[p]||"pivot"===p?this._parseTransform(target,value):(s=target.attr(p),this._firstPT=pt={_next:this._firstPT,t:this._props,p:p,b:s,f:!1,n:"raphael_"+p,r:!1,type:0},"fill"===p||"stroke"===p?(clr1=_parseColor(s),clr2=_parseColor(v),pt.e=v,pt.s=Number(clr1[0]),pt.c=Number(clr2[0])-pt.s,pt.gs=Number(clr1[1]),pt.gc=Number(clr2[1])-pt.gs,pt.bs=Number(clr1[2]),pt.bc=Number(clr2[2])-pt.bs,clr1.length>3||clr2.length>3?(pt.as=clr1.length<4?1:Number(clr1[3]),pt.ac=(clr2.length<4?1:Number(clr2[3]))-pt.as,pt.type=2):pt.type=1):(s="string"==typeof s?parseFloat(s.replace(_NaNExp,"")):Number(s),"string"==typeof v?(rel="="===v.charAt(1),v=parseFloat(v.replace(_NaNExp,""))):rel=!1,pt.e=v||0===v?rel?v+s:v:value[p],!s&&0!==s||!v&&0!==v||!(pt.c=rel?v:v-s)?(pt.type=-1,pt.i=value[p],pt.s=pt.c=0):pt.s=s),this._overwriteProps.push("raphael_"+p),pt._next&&(pt._next._prev=pt)):this._parseTransform(target,v);return!0},set:function(v){for(var val,pt=this._firstPT;pt;)val=pt.c*v+pt.s,pt.r&&(val=Math.round(val)),pt.type?1===pt.type?pt.t[pt.p]="rgb("+(val>>0)+", "+(pt.gs+v*pt.gc>>0)+", "+(pt.bs+v*pt.bc>>0)+")":2===pt.type?pt.t[pt.p]="rgba("+(val>>0)+", "+(pt.gs+v*pt.gc>>0)+", "+(pt.bs+v*pt.bc>>0)+", "+(pt.as+v*pt.ac)+")":-1===pt.type&&(pt.t[pt.p]=pt.i):pt.t[pt.p]=val,pt=pt._next;if(this._target.attr(this._props),this._transform){pt=this._transform;var ang=pt.rotation,skew=ang-pt.skewX,a=Math.cos(ang)*pt.scaleX,b=Math.sin(ang)*pt.scaleX,c=Math.sin(skew)*-pt.scaleY,d=Math.cos(skew)*pt.scaleY,min=1e-6,pxl=this._pxl,pyl=this._pyl;min>b&&b>-min&&(b=0),min>c&&c>-min&&(c=0),pt.ox=this._pxg-(pxl*a+pyl*c),pt.oy=this._pyg-(pxl*b+pyl*d),this._target.transform("m"+a+","+b+","+c+","+d+","+(pt.tx+pt.ox)+","+(pt.ty+pt.oy))}}}),p=RaphaelPlugin.prototype;p._parseTransform=function(t,v){if(!this._transform){var m2,skewY,p,pt,copy,dx,dy,mtx,pivot,m1=this._transform=_getTransform(t,!0),min=1e-6;if("object"==typeof v){if(m2={scaleX:_parseVal(null!=v.scaleX?v.scaleX:v.scale,m1.scaleX),scaleY:_parseVal(null!=v.scaleY?v.scaleY:v.scale,m1.scaleY),tx:_parseVal(v.tx,m1.tx),ty:_parseVal(v.ty,m1.ty)},null!=v.shortRotation){m2.rotation="number"==typeof v.shortRotation?v.shortRotation*_DEG2RAD:_parseAngle(v.shortRotation,m1.rotation);var dif=(m2.rotation-m1.rotation)%(2*Math.PI);dif!==dif%Math.PI&&(dif+=Math.PI*(0>dif?2:-2)),m2.rotation=m1.rotation+dif}else m2.rotation=null==v.rotation?m1.rotation:"number"==typeof v.rotation?v.rotation*_DEG2RAD:_parseAngle(v.rotation,m1.rotation);m2.skewX=null==v.skewX?m1.skewX:"number"==typeof v.skewX?v.skewX*_DEG2RAD:_parseAngle(v.skewX,m1.skewX),m2.skewY=null==v.skewY?m1.skewY:"number"==typeof v.skewY?v.skewY*_DEG2RAD:_parseAngle(v.skewY,m1.skewY),(skewY=m2.skewY-m1.skewY)&&(m2.skewX+=skewY,m2.rotation+=skewY),m2.skewY<min&&m2.skewY>-min&&(m2.skewY=0),m2.skewX<min&&m2.skewX>-min&&(m2.skewX=0),m2.rotation<min&&m2.rotation>-min&&(m2.rotation=0),pivot=v.localPivot||v.globalPivot,"string"==typeof pivot?(copy=pivot.split(","),dx=Number(copy[0]),dy=Number(copy[1])):"object"==typeof pivot?(dx=Number(pivot.x),dy=Number(pivot.y)):v.localPivot?(copy=t.getBBox(!0),dx=copy.width/2,dy=copy.height/2):(copy=t.getBBox(),dx=copy.x+copy.width/2,dy=copy.y+copy.height/2),v.localPivot?(mtx=t.matrix,dx+=t.attr("x"),dy+=t.attr("y"),this._pxl=dx,this._pyl=dy,this._pxg=dx*mtx.a+dy*mtx.c+mtx.e-m1.tx,this._pyg=dx*mtx.b+dy*mtx.d+mtx.f-m1.ty):(mtx=t.matrix.invert(),this._pxl=dx*mtx.a+dy*mtx.c+mtx.e,this._pyl=dx*mtx.b+dy*mtx.d+mtx.f,this._pxg=dx-m1.tx,this._pyg=dy-m1.ty)}else{if("string"!=typeof v)return;copy=this._target.transform(),t.transform(v),m2=_getTransform(t,!1),t.transform(copy)}for(p in _transformMap)m1[p]!==m2[p]&&"shortRotation"!==p&&"scale"!==p&&(this._firstPT=pt={_next:this._firstPT,t:m1,p:p,s:m1[p],c:m2[p]-m1[p],n:p,f:!1,r:!1,b:m1[p],e:m2[p],type:0},pt._next&&(pt._next._prev=pt),this._overwriteProps.push("raphael_"+p))}}}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()();